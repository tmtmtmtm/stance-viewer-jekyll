#!/usr/bin/ruby

# Generate pages for each Party

page = <<eos
---
layout: party
id: PARTYID
name: PARTYNAME
autogenerated: true
---
eos

require 'json'

filename = ARGV.first || "_data/parties.yaml"
JSON.parse(File.read(filename)).each do |party|
  text = page.gsub(/PARTYID/, party['id']).gsub(/PARTYNAME/, party['name'])
  filename = "party/#{party['id']}.md"
  warn "Writing #{filename}"
  File.write(filename, text)
end
